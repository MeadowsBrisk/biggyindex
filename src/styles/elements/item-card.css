/* ==========================================================================
   Item Card Styles
   ========================================================================== */

/* ==========================================================================
   Card Content (Generic reusable card)
   ========================================================================== */

.card-content {
	@apply relative w-full text-left cursor-pointer rounded-lg;
	padding: 0.5em;
	background: transparent;
	border: none;
	appearance: none;
	margin-bottom: 8px;
	transition:
		background-color 220ms ease-out,
		box-shadow 220ms ease-out,
		transform 220ms ease-out;
}

.card-content:focus-visible {
	@apply outline-none ring-2 ring-offset-2 ring-offset-white dark:ring-offset-gray-900 ring-sky-400;
}

.card-content:hover {
	background: linear-gradient(
		135deg,
		rgba(125, 211, 252, 0.06) 0%,
		rgba(56, 189, 248, 0.04) 50%,
		rgba(125, 211, 252, 0.03) 100%
	);
	box-shadow:
		0 4px 12px rgba(14, 116, 144, 0.06),
		inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.dark .card-content:hover {
	background: linear-gradient(
		135deg,
		rgba(56, 189, 248, 0.2) 0%,
		rgba(30, 64, 175, 0.16) 50%,
		rgba(14, 165, 233, 0.12) 100%
	);
	box-shadow:
		0 6px 18px rgba(12, 48, 96, 0.3),
		inset 0 1px 0 rgba(125, 211, 252, 0.15);
}

.card-content:active {
	transition-duration: 80ms;
}

/* Card Content: Inner */
.card-content__inner {
	@apply relative;
}

/* Card Content: Header */
.card-content__header {
	@apply flex items-center justify-between gap-3;
	position: relative;
	margin-bottom: 10px;
}

.card-content__header::after {
	content: "";
	position: absolute;
	left: 0;
	right: 0;
	bottom: -4px;
	height: 1px;
	background: linear-gradient(
		90deg,
		rgba(203, 213, 225, 0.4) 0%,
		rgba(148, 163, 184, 0.6) 50%,
		rgba(203, 213, 225, 0.4) 100%
	);
	opacity: 0.45;
	transition:
		opacity 180ms ease-out,
		background 180ms ease-out;
}

.dark .card-content__header::after {
	background: linear-gradient(
		90deg,
		rgba(30, 41, 59, 0.6) 0%,
		rgba(148, 163, 184, 0.8) 50%,
		rgba(30, 41, 59, 0.6) 100%
	);
}

.card-content:hover .card-content__header::after {
	opacity: 1;
	background: linear-gradient(
		90deg,
		rgba(125, 211, 252, 0.5) 0%,
		rgba(56, 189, 248, 0.7) 50%,
		rgba(125, 211, 252, 0.5) 100%
	);
}

.dark .card-content:hover .card-content__header::after {
	background: linear-gradient(
		90deg,
		rgba(56, 189, 248, 0.6) 0%,
		rgba(125, 211, 252, 0.85) 50%,
		rgba(56, 189, 248, 0.6) 100%
	);
}

/* Card Content: Title */
.card-content__title {
	@apply text-base font-semibold text-gray-900 dark:text-gray-100 line-clamp-1;
	flex: 1;
	min-width: 0;
	transition: color 180ms ease-out;
}

.card-content:hover .card-content__title {
	@apply text-gray-950 dark:text-white;
}

/* Card Content: Icon */
.card-content__icon {
	flex-shrink: 0;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	opacity: 0;
	transition: opacity 200ms ease-out;
}

.card-content__icon svg {
	width: 14px;
	height: 14px;
	@apply text-sky-600 dark:text-sky-400;
}

.card-content:hover .card-content__icon,
.card-content:focus-visible .card-content__icon {
	opacity: 1;
}

/* Card Content: Description */
.card-content__description {
	@apply text-sm text-gray-700 dark:text-gray-300 leading-[1.4];
	display: -webkit-box;
	-webkit-box-orient: vertical;
	-webkit-line-clamp: 5;
	line-clamp: 5;
	overflow: hidden;
	height: calc(1.4em * 5);
	margin: 0;
	transition: color 180ms ease-out;
}

.card-content:hover .card-content__description {
	@apply text-gray-800 dark:text-gray-200;
}

/* ==========================================================================
   Item List Grid
   ========================================================================== */

.item-list-grid {
	@apply grid gap-4 lg:gap-[10px];
}

/* ==========================================================================
   Item Card
   ========================================================================== */

.item-card {
	@apply contain-paint transition-colors relative rounded-lg
		border border-gray-200 dark:border-gray-700
		overflow-hidden w-full
		hover:border-gray-300 dark:hover:border-gray-600 hover:shadow-sm;

	background: linear-gradient(
		180deg,
		rgba(248, 250, 252, 0.98) 0%,
		rgba(255, 255, 255, 1) 58%,
		rgba(236, 242, 249, 0.96) 100%
	);
	padding: 2px;

	/* Entry animation (starts hidden) */
	opacity: 0;
	transform: translate3d(0, 18px, 0);
	transition-property: opacity, transform, box-shadow, border-color, background-color;
	transition-duration: 540ms, 520ms, 280ms, 280ms, 280ms;
	transition-timing-function:
		cubic-bezier(0.16, 1, 0.3, 1),
		cubic-bezier(0.16, 1, 0.3, 1),
		ease-out,
		ease-out,
		ease-out;
	transition-delay: 0ms;
}

.item-card:hover {
	background: linear-gradient(
		180deg,
		rgba(255, 255, 255, 1) 0%,
		rgba(246, 250, 255, 0.98) 52%,
		rgba(232, 241, 255, 0.94) 100%
	);
}

.dark .item-card {
	background: linear-gradient(
		180deg,
		#152542 0%,
		rgba(15, 24, 43, 0.92) 55%,
		rgba(16, 24, 39, 0.9) 100%
	);
}

.dark .item-card:hover {
	background: linear-gradient(
		180deg,
		rgba(23, 33, 52, 0.95) 0%,
		rgba(24, 35, 55, 0.94) 55%,
		rgba(14, 20, 33, 0.9) 100%
	);
}

/* Item Card: Entered state (visible) */
.item-card[data-entered="true"] {
	opacity: 1;
	transform: translate3d(0, 0, 0);
}

/* Item Card: Animation complete */
.item-card[data-animated="true"] {
	will-change: auto;
}

/* Item Card: Inner container */
.item-card-inner {
	@apply flex flex-col h-full
		bg-white dark:bg-[#0f1725]
		hover:bg-gray-50 dark:hover:bg-[#141d30]
		rounded-[5px] border border-gray-200 dark:border-gray-800;
}

/* Item Card: Image container */
.item-card-image {
	@apply rounded-[4px];
	contain: layout style;
}

/* Reserve space for dynamic aspect ratios to prevent layout shift */
.item-card-image > [class*="aspect-"] {
	contain: strict;
}

/* Card image hover zoom */
.card-image {
	@apply w-full h-full object-cover transform-gpu
		transition-transform duration-900 ease-out
		group-hover/image:scale-[1.06] group-hover:scale-[1.04]
		cursor-zoom-in;
}

/* ==========================================================================
   Item Card: Staggered Entry Animation
   Matches ItemList column breakpoints
   ========================================================================== */

/* 2 columns (tablet: 640px - 1023px) */
@media (min-width: 640px) and (max-width: 1023px) {
	.item-card:nth-child(2n+1) { transition-delay: 0ms; }
	.item-card:nth-child(2n+2) { transition-delay: 90ms; }
}

/* 3 columns (small desktop: 1024px - 1439px) */
@media (min-width: 1024px) and (max-width: 1439px) {
	.item-card:nth-child(3n+1) { transition-delay: 0ms; }
	.item-card:nth-child(3n+2) { transition-delay: 80ms; }
	.item-card:nth-child(3n+3) { transition-delay: 160ms; }
}

/* 4 columns (medium desktop: 1440px - 1919px) */
@media (min-width: 1440px) and (max-width: 1919px) {
	.item-card:nth-child(4n+1) { transition-delay: 0ms; }
	.item-card:nth-child(4n+2) { transition-delay: 80ms; }
	.item-card:nth-child(4n+3) { transition-delay: 160ms; }
	.item-card:nth-child(4n+4) { transition-delay: 240ms; }
}

/* 5 columns (ultrawide: 1920px - 2559px) */
@media (min-width: 1920px) and (max-width: 2559px) {
	.item-card:nth-child(5n+1) { transition-delay: 0ms; }
	.item-card:nth-child(5n+2) { transition-delay: 70ms; }
	.item-card:nth-child(5n+3) { transition-delay: 140ms; }
	.item-card:nth-child(5n+4) { transition-delay: 210ms; }
	.item-card:nth-child(5n+5) { transition-delay: 280ms; }
}

/* 6 columns (superwide: 2560px+) */
@media (min-width: 2560px) {
	.item-card:nth-child(6n+1) { transition-delay: 0ms; }
	.item-card:nth-child(6n+2) { transition-delay: 70ms; }
	.item-card:nth-child(6n+3) { transition-delay: 140ms; }
	.item-card:nth-child(6n+4) { transition-delay: 210ms; }
	.item-card:nth-child(6n+5) { transition-delay: 280ms; }
	.item-card:nth-child(6n+6) { transition-delay: 350ms; }
}

/* Reduced motion: disable animations */
@media (prefers-reduced-motion: reduce) {
	.item-card {
		opacity: 1;
		transform: none;
		transition: none;
		will-change: auto;
	}
}

/* ==========================================================================
   Variant Pills
   ========================================================================== */

.variant-pills-scroll {
	@apply flex gap-1.5 overflow-x-auto overflow-y-hidden;
	scrollbar-width: none;
	-ms-overflow-style: none;
	-webkit-overflow-scrolling: touch;
	scroll-snap-type: x proximity;
	-webkit-mask-image: linear-gradient(to right, black calc(100% - 24px), transparent 100%);
	mask-image: linear-gradient(to right, black calc(100% - 24px), transparent 100%);
	user-select: none;
	cursor: grab;
}

.variant-pills-scroll:active {
	cursor: grabbing;
	scroll-snap-type: none;
}

.variant-pills-scroll::-webkit-scrollbar {
	display: none;
}

.variant-pill {
	@apply inline-flex items-center shrink-0 rounded-full
		px-[7px] py-0.5 text-[11px] lg:text-[9px]
		bg-gray-100 dark:bg-gray-800
		text-gray-700 dark:text-gray-300
		border border-gray-200 dark:border-gray-700;
	scroll-snap-align: start;
	white-space: nowrap;
}

/* ==========================================================================
   Price Area Button
   ========================================================================== */

.price-area-button {
	@apply relative inline-flex flex-col justify-end gap-1
		min-h-[1.25rem] text-left rounded-md
		border border-transparent px-2 py-1;
	color: inherit;
	align-self: flex-start;
	pointer-events: auto;
	z-index: 50;
	transition:
		border-color 180ms ease-out,
		background-color 180ms ease-out,
		box-shadow 180ms ease-out;
}

.price-area-button:hover,
.price-area-button:focus-visible {
	@apply border-gray-300 dark:border-gray-600;
}

.price-area-button:focus-visible {
	@apply outline-none ring-2 ring-offset-1 ring-offset-white dark:ring-offset-gray-900 ring-emerald-400;
}

/* Price Area: Hint text */
.price-area-button__hint {
	@apply inline-flex items-center gap-1
		text-[7px] font-semibold uppercase tracking-[0.14em]
		text-black dark:text-white;
	opacity: 0;
	top: 1em;
	white-space: nowrap;
	pointer-events: none;
	transition:
		opacity 160ms ease-out,
		transform 160ms ease-out;
}

.price-area-button__hint-arrow {
	@apply text-[7px] leading-none;
	transition: transform 160ms ease-out;
}

.price-area-button__hint-arrow[data-expanded="true"] {
	transform: rotate(180deg);
}

.item-card:hover .price-area-button__hint,
.price-area-button:focus-visible .price-area-button__hint,
.price-area-button--active .price-area-button__hint {
	opacity: 0.9;
	transform: translateY(0);
}

/* ==========================================================================
   Pricing Overlay Panel
   ========================================================================== */

.item-card__pricing-overlay {
	@apply absolute left-0 right-0 bottom-0 z-30 flex flex-col max-h-[70%] lg:max-h-[60%];
	background: linear-gradient(
		180deg,
		rgba(255, 255, 255, 0.98) 0%,
		rgba(255, 255, 255, 0.96) 100%
	);
	color: #0f1725;
	transform: translateY(100%);
	opacity: 0;
	pointer-events: none;
	padding: 0;
	backdrop-filter: blur(12px);
	border-radius: 8px 8px 0 0;
	box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.08);
	transition:
		transform 320ms cubic-bezier(0.64, 0, 0.78, 0.19),
		opacity 280ms ease-in;
}

.dark .item-card__pricing-overlay {
	background: linear-gradient(
		180deg,
		rgba(15, 23, 37, 0.97) 0%,
		rgba(15, 23, 37, 0.95) 100%
	);
	color: #f8fafc;
	border-top: solid 1px #3f5372;
	box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.24);
}

.item-card__pricing-overlay--open {
	transform: translateY(0%);
	opacity: 1;
	pointer-events: auto;
	transition:
		transform 320ms cubic-bezier(0.22, 0.81, 0.36, 1),
		opacity 220ms ease-out;
}

.item-card__pricing-overlay--static {
	transition: none !important;
}

/* Pricing Overlay: Inner container */
.item-card__pricing-inner {
	@apply flex flex-col h-full;
	padding: 0.75rem 1rem 4.3rem;
}

/* Pricing Overlay: Header */
.item-card__pricing-header {
	@apply flex items-center justify-between gap-2 pb-2 border-b border-gray-200 dark:border-gray-700;
}

.item-card__pricing-title {
	@apply text-xs font-semibold text-gray-800 dark:text-gray-200;
}

.item-card__pricing-close {
	@apply inline-flex items-center gap-1 rounded-full
		border border-gray-300 dark:border-gray-600
		px-2 py-0.5 text-[10px] font-medium
		text-gray-600 dark:text-gray-300
		hover:bg-gray-100 dark:hover:bg-gray-700
		focus:outline-none focus-visible:ring-2
		ring-offset-1 ring-offset-white dark:ring-offset-gray-900 ring-blue-400
		transition-colors;
}

/* Pricing Overlay: Scrollable list */
.item-card__pricing-scroll {
	@apply mt-2 flex-1 overflow-y-auto rounded-md
		border border-gray-200 dark:border-gray-700
		bg-gray-50/95 dark:bg-gray-900/60 p-2;
	max-height: 200px;
}

.item-card__pricing-scroll ul {
	@apply space-y-1.5 text-xs;
}

.item-card__pricing-scroll li {
	@apply flex items-center justify-between gap-2;
}

.item-card__pricing-scroll li span:first-child {
	@apply text-gray-900 dark:text-gray-100;
}

.item-card__pricing-scroll li span:last-child {
	@apply text-gray-700 dark:text-gray-300 font-medium;
}

.item-card__pricing-meta {
	@apply mt-2 text-[10px] text-gray-500 dark:text-gray-400;
}

/* Reduced motion: disable overlay animations */
@media (prefers-reduced-motion: reduce) {
	.item-card__pricing-overlay {
		transition: none;
		transform: translateY(0);
		opacity: 1;
	}
}

/* ==========================================================================
   Card Controls (Hover reveal)
   ========================================================================== */

@media (hover: hover) and (pointer: fine) {
	.card-controls > * {
		@apply opacity-0;
		visibility: hidden;
		transition:
			opacity 200ms ease-out,
			box-shadow 200ms ease-out,
			visibility 0ms linear 200ms;
	}

	/* Always show controls marked as always-show (e.g., favourited star) */
	.card-controls > *.always-show {
		@apply opacity-100;
		visibility: visible;
	}

	.group:hover .card-controls > *,
	.group:focus-within .card-controls > * {
		@apply opacity-100;
		visibility: visible;
	}

	/* Staggered reveal delays */
	.group:hover .card-controls > *:nth-child(1),
	.group:focus-within .card-controls > *:nth-child(1) {
		transition-delay: 40ms;
	}

	.group:hover .card-controls > *:nth-child(2),
	.group:focus-within .card-controls > *:nth-child(2) {
		transition-delay: 80ms;
	}
}
